<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <f:metadata>
        <f:event type="preRenderView" listener="#{sessionController.watchOut()}" />
    </f:metadata>
    <body>

        <ui:composition template="./index.xhtml">

            <ui:define name="content">
                <h:form id="liste_mission">
                    <center>
                        <h4><h:outputText value="Liste des Missions" style="color: green;"/></h4>
                        <h6><h:outputText id="msg" value="#{missionController.msg}" style="color: green;"/></h6>
                    </center>
                    <p:dataTable cellSeparator="false" rows="10" paginator="true" id="table" widgetVar="ordM" sortMode="multiple" scrollable="true" emptyMessage="aucun resultats avec ce critÃ©re" scrollHeight="282" value="#{missionController.listMission}" var="item" rowKey="#{item.idmission}" selectionMode="single" selection="#{missionController.mission}">
                        <f:facet name="header">
                            <p:outputPanel>
                                <h:outputText value=" #{lm.Rechercher}  :" />
                                <p:inputText id="globalFilter" onkeyup="PF('ordM').filter()" style="width:100px" placeholder="#{lm.Motcle}"/>
                            </p:outputPanel>
                        </f:facet>
                        <p:column sortBy="#{item.datedebmission}" filterBy="#{item.datedebmission}" filterMatchMode="contains">
                            <f:facet name="header">
                                <h:outputText value="Date de debut"/>
                            </f:facet>
                            <h:outputText value="#{item.datedebmission}">
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>
                        </p:column>
                        <p:column sortBy="#{item.datefinmission}" filterBy="#{item.datefinmission}" filterMatchMode="contains">
                            <f:facet name="header">
                                <h:outputText value="Date de fin"/>
                            </f:facet>
                            <h:outputText value="#{item.datefinmission}">
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>
                        </p:column>
                        <p:column sortBy="#{item.lieumission}" filterBy="#{item.lieumission}" filterMatchMode="contains">
                            <f:facet name="header">
                                <h:outputText value="Lieu de la mission"/>
                            </f:facet>
                            <h:outputText value="#{item.lieumission}"/>
                        </p:column>
                        <p:column sortBy="#{item.descriptionmission}" filterBy="#{item.descriptionmission}" filterMatchMode="contains">
                            <f:facet name="header">
                                <h:outputText value="Description"/>
                            </f:facet>
                            <h:outputText value="#{item.descriptionmission}"/>
                        </p:column>
                        <p:column sortBy="#{item.statut}" filterBy="#{item.statut}" filterMatchMode="contains">
                            <f:facet name="header">
                                <h:outputText value="Statut"/>
                            </f:facet>
                            <h:outputText value="#{item.statut}"/>
                        </p:column>
                    </p:dataTable>
                    <p:separator/>

                    <div class="row" style="margin: auto;">
                        <p:commandButton style="margin-left: 30px;" class="btn waves-effect waves-light btn col s2" widgetVar="add"  actionListener="#{missionController.prepareCreate}" update="msg,:fm_mission" partialSubmit="true" oncomplete="PF('wv_mission').show()" value="#{lm.Ajouter}"/>
                        <p:commandButton style="margin-left: 30px;" class="btn waves-effect waves-light btn col s2" widgetVar="modify"  actionListener="#{missionController.action}" update="msg,:fm_mission" partialSubmit="true" oncomplete="PF('wv_mission').show()" value="#{lm.Modifier}"/>
                        <p:commandButton style="margin-left: 30px;" class="btn waves-effect waves-light btn col s2" widgetVar="delete"  actionListener="#{missionController.action}" update="msg,:fm_mission" partialSubmit="true" oncomplete="PF('wv_mission').show()" value="#{lm.Supprimer}"/>
                        <p:commandButton style="margin-left: 30px;" class="btn waves-effect waves-light btn col s2" widgetVar="consult"  actionListener="#{missionController.action}" update="msg,:fm_mission" partialSubmit="true" oncomplete="PF('wv_mission').show()" value="#{lm.Consulter}"/>
                        <p:commandButton style="margin-left: 30px;" class="btn waves-effect waves-light btn col s2" actionListener="#{missionController.initMission()}" update="table" partialSubmit="true" value="#{lm.Rafraichir}"/>
                    </div>
                </h:form>
                <p:separator/>
                <div class="row">
                    <form id="form_mission" class="col s12">
                        <p:dialog modal="true" id="fm_mission" widgetVar="wv_mission">
                            <center>
                                <f:facet name="header">
                                    <h:outputText rendered="#{!missionsController.operation.equals('consult') and !missionsController.operation.equals('delete') and !missionsController.operation.equals('modify')}" value="Ajouter une mission" class="green-text" style="font-weight: bold;"/>
                                    <h:outputText rendered="#{!missionsController.operation.equals('consult') and !missionsController.operation.equals('delete') and !missionsController.operation.equals('add')}" value="Modifier une mission" class="green-text" style="font-weight: bold;"/>
                                    <h:outputText rendered="#{!missionsController.operation.equals('consult') and !missionsController.operation.equals('add') and !missionsController.operation.equals('modify')}" value="Supprimer une mission" class="green-text" style="font-weight: bold;"/>
                                    <h:outputText rendered="#{!missionsController.operation.equals('add') and !missionsController.operation.equals('delete') and !missionsController.operation.equals('modify')}" value="Consulter une mission" class="green-text" style="font-weight: bold;"/>
                                </f:facet>
                            </center>
                            <div class="row">
                                <div class="input-field col s6">
                                    <input placeholder="Placeholder" id="first_name" type="text" class="validate"/>
                                    <label for="first_name">First Name</label>
                                </div>
                                <div class="input-field col s6">
                                    <input id="last_name" type="text" class="validate"/>
                                    <label for="last_name">Last Name</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <input value="I am not editable" id="disabled" type="text" class="validate"/>
                                    <label for="disabled">Disabled</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <input id="password" type="password" class="validate"/>
                                    <label for="password">Password</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <input id="email" type="email" class="validate"/>
                                    <label for="email">Email</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12">
                                    This is an inline input field:
                                    <div class="input-field inline">
                                        <input id="email" type="email" class="validate"/>
                                        <label for="email" data-error="wrong" data-success="right">Email</label>
                                    </div>
                                </div>
                            </div>
                            <f:facet name="footer">
                                <center>
                                    <p:commandButton  rendered="#{!missionController.operation.equals('consult') and !missionController.operation.equals('delete')}" style="margin-left: 30px;" class="btn waves-effect waves-light btn col s2" actionListener="#{missionController.persist()}" update=":liste_mission:table,:liste_mission:msg" partialSubmit="true" value="Enregistrer"/>
                                    <p:commandButton  rendered="#{!missionController.operation.equals('consult') and !missionController.operation.equals('add') and !missionController.operation.equals('modify')}" style="margin-left: 30px;" class="btn waves-effect waves-light btn col s2" actionListener="#{missionController.persist()}" update=":liste_mission:table,:liste_mission:msg" partialSubmit="true" value="Supprimer"/>
                                </center>
                            </f:facet>
                        </p:dialog>
                    </form>
                </div>
            </ui:define>

        </ui:composition>

    </body>
</html>
