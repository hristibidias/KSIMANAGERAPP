<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <f:metadata>
        <f:event type="preRenderView" listener="#{sessionController.watchOut()}" />
    </f:metadata>
    <body>

        <ui:composition template="./index.xhtml">

            <ui:define name="content">
                <h:body>

                    <p:layout style="min-width:400px; min-height:200px; height: 100%; width: 90%;">
                        <p:layoutUnit position="center">
                            <div style="margin-left: 150px; margin-right: 150px;" class="row">
                                <div class="col s12 m7">
                                    <h:form>
                                        <div style="height: 500px; width: 300px;" class="card">
                                            <div class="card-image">
                                                <img src="resources/images/toff/jolie fille.jpg"/>
                                                <span class="card-title">Mon profil</span>
                                            </div>
                                            <div class="card-content">
                                                <center style="font-size: 14px; font-weight: bold;">
                                                    <h:form id="form_profil_msg">
                                                        <h:outputText id="msg" value="#{sessionController.msg}   " style="color: green; font-size: 12px; font-weight: bold;"/>
                                                    </h:form>
                                                    <span>#{lm.Matricule} : #{sessionController.currentUser.matricule}</span><br/>
                                                    <span>#{lm.Nom} : #{sessionController.currentUser.nompers}</span><br/>
                                                    <span>#{lm.Prenom} : #{sessionController.currentUser.prenompers}</span>
                                                </center>
                                            </div>
                                        </div>
                                    </h:form>
                                </div>
                            </div>
                            <ul style="margin-left: 475px;" class="collapsible" data-collapsible="accordion">

                                <li style="margin-top: -515px;">
                                    <div style="font-size: 14px; font-weight: bold; width: 100%;" class="collapsible-header">
                                        <!--<i class="material-icons">filter_drama</i>-->
                                        #{lm.Nom}, #{lm.Prenom}
                                    </div>
                                    <div class="collapsible-body">
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Nom} :    #{sessionController.currentUser.nompers}</span><br/>
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Prenom} :    #{sessionController.currentUser.prenompers}</span>
                                    </div>
                                </li>
                                <li>
                                    <div style="font-size: 14px; font-weight: bold; width: 100%;" class="collapsible-header">
                                        <!--<i class="material-icons">filter_drama</i>-->
                                        #{lm.Matricule}, #{lm.Poste}
                                    </div>
                                    <div class="collapsible-body">
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Matricule} :    #{sessionController.currentUser.matricule}</span><br/>
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Poste} :    #{sessionController.currentUser.poste}</span>
                                    </div>
                                </li>
                                <li>
                                    <div style="font-size: 14px; font-weight: bold;" class="collapsible-header">
                                        <!--<i class="material-icons">place</i>-->
                                        #{lm.Datenaiss}, #{lm.Dateembauche}
                                    </div>
                                    <div class="collapsible-body">
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Datenaiss} :    #{sessionController.currentUser.datenaisspers}</span><br/>
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Dateembauche} :    #{sessionController.currentUser.datedeb}</span>
                                    </div>
                                </li>
                                <li>
                                    <div style="font-size: 14px; font-weight: bold;" class="collapsible-header">
                                        <!--<i class="material-icons">place</i>-->
                                        #{lm.Email}, #{lm.CNI}, #{lm.Telephone}
                                    </div>
                                    <div class="collapsible-body">
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Email} :    #{sessionController.currentUser.email}</span><br/>
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.CNI} :    #{sessionController.currentUser.cnipers}</span><br/>
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Telephone} :    #{sessionController.currentUser.tel}</span>
                                    </div>
                                </li>
                                <li>
                                    <div style="font-size: 14px; font-weight: bold;" class="collapsible-header">
                                        <!--<i class="material-icons">place</i>-->
                                        #{lm.Pays}, #{lm.Ville}, #{lm.Quartier}
                                    </div>   
                                    <div class="collapsible-body">
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Pays} :    #{sessionController.currentUser.pays}</span><br/>
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Ville} :    #{sessionController.currentUser.ville}</span><br/>
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Quartier} :    #{sessionController.currentUser.quartier}</span>
                                    </div>
                                </li>
                                <li>
                                    <div style="font-size: 14px; font-weight: bold;" class="collapsible-header">
                                        <!--<i class="material-icons">place</i>-->
                                        #{lm.Login}, #{lm.MotDePasse}
                                    </div>
                                    <div class="collapsible-body">
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.Login} :    #{sessionController.currentUser.login}</span><br/>
                                        <span class="text-lighten-1 waves-effect green-text" style="font-size: 14px; font-style: oblique; font-size-adjust: initial; font-weight: bold">#{lm.MotDePasse} :    #{sessionController.currentUser.password}</span>
                                    </div><br/>
                                    <h:form id="form_infos">
                                        <center>
                                            <p:commandButton class="btn waves-effect waves-light btn col s2" widgetVar="modifyProfil"  actionListener="#{personnelController.action}" update=":form_mon_profil:fm_mon_profil" partialSubmit="true" oncomplete="PF('wv_mon_profil').show()" value="#{lm.Modifier}"/>
                                        </center>
                                    </h:form>
                                </li>
                            </ul>
                        </p:layoutUnit>

                        <h:form id="form_mon_profil">
                            <p:dialog  id="fm_mon_profil" widgetVar="wv_mon_profil">
                                <h:panelGrid id="inputs" style="text-align: justify;" columns="2">
                                    <p:outputLabel style="color: green; font-weight: bold; text-decoration: underline;" value="#{lm.Email} : " for="email" />
                                    <p:inputMask mask="*+@*+.*+" style="color: green; font-weight: bold;" value="#{sessionController.currentUser.email}" id="email" />
                                    <p:outputLabel style="color: green; font-weight: bold; text-decoration: underline;" value="#{lm.Telephone} : " for="tel" />
                                    <p:inputMask mask="999-999-999" value="#{sessionController.currentUser.tel}" id="tel" />
                                    <p:outputLabel style="color: green; font-weight: bold; text-decoration: underline;" value="#{lm.Quartier} : " for="quartier" />
                                    <p:inputText style="color: green; font-weight: bold;" value="#{sessionController.currentUser.quartier}" id="quartier" />
                                    <p:outputLabel style="color: green; font-weight: bold;" value="#{lm.Login} : " for="login" />
                                    <p:inputText style="color: green; font-weight: bold;" value="#{sessionController.currentUser.login}" id="login" />
                                    <p:outputLabel style="color: green; font-weight: bold;" value="#{lm.MotDePasse} : " for="password" />
                                    <p:password  style="color: green; font-weight: bold;" value="#{sessionController.currentUser.password}" id="password" />
                                    <!--<p:outputLabel style="color: green; font-weight: bold;" value="# {lm.Photo} : " />
                                    <p:growl id="messages" showDetail="true" />

                                    <p:fileUpload value=" # {sessionController.file}" mode="simple" disabled="false" />

                                    <p:commandButton value="Submit" ajax="false" actionListener="# {sessionController.upload()}" disabled="false" />-->

                                </h:panelGrid>
                                <p:separator/>
                                <f:facet name="footer">
                                    <center>
                                        <p:commandButton class="btn waves-effect waves-light btn btn-flat" update="inputs" id="ok" value="#{lm.Modifier}" action="#{sessionController.modifyProfil()}" />
                                    </center> 
                                </f:facet>
                            </p:dialog>
                        </h:form>
                    </p:layout>
                </h:body>
            </ui:define>

        </ui:composition>

    </body>
</html>
